"use strict";(self.modernJsonp=self.modernJsonp||[]).push([[77058],{685402:(e,t,i)=>{i.d(t,{G:()=>s,b:()=>o});var r=i(667294),n=i(616550),a=i(785893);let l=(0,r.createContext)(!0);function s({children:e}){let t=(0,n.TH)(),[i,s]=(0,r.useState)(!0),o=(0,r.useRef)(t);return(0,r.useEffect)(()=>{o.current!==t&&(o.current=t,s(!1))},[t]),(0,a.jsx)(l,{value:i,children:e})}function o(){return(0,r.useContext)(l)}},122644:(e,t,i)=>{i.d(t,{Z:()=>a});var r=i(397657),n=i(857147);let a=(e=()=>{})=>{let t=(0,n.mB)(window.location.search),{invite_code:i}=t;if(!i){e(t);return}let a=encodeURIComponent(encodeURIComponent(i));(0,r.Z)({url:"/v3/invite_code/attribution/land/",method:"POST",data:{invite_code:a}})}},575481:(e,t,i)=>{i.d(t,{J:()=>a,U:()=>A});var r=i(578373),n=i(992114);let a="nic_v4",l=`${a}=1a`,s=`${a}=1b`,o=[l,s],d=["invite_code","invite","board_invite_code","sender"],c=null,u=e=>!!d.find(t=>e.includes(t)),_=e=>!!o.find(t=>e.includes(t)),h=e=>e.pathname.includes("/pin/")&&!u(e.search)&&!_(e.search),p=e=>e.includes("sender"),m=e=>!u(e)&&!p(e)&&e.includes(a),f=async e=>{let{resource_response:t}=await r.Z.create("InviteSocialTrackingParamNonInviteResource",{user_id:e}).callCreate();if(!t)return(0,n.nP)(`${a}.social_tracking_pin_non_invite.no_resource_response`),"";{let e=encodeURIComponent(t.data);return(0,n.nP)(`${a}.social_tracking_pin_non_invite.encrypted.${e?"true":"false"}`),e}},P=(e,t,i)=>{let r=e.search?"&":"?";return e.pathname+e.search+(r+(i?s:l)+t)},g=(e,t,i=!1,r)=>{if(!h(e))return;let l=i?"mweb":"web";if(!t){(0,n.nP)(`${l}.${a}.social_tracking_pin_non_invite.insert.no_encrypted_id`);return}(0,n.nP)(`${l}.${a}.social_tracking_pin_non_invite.insert.attempt`);try{let s=P(e,t,i||!1);(0,n.nP)(`${l}.${a}.social_tracking_pin_non_invite.insert.success`),r(s)}catch{(0,n.nP)(`${l}.${a}.social_tracking_pin_non_invite.insert.caught_exception`)}},b=(e,t,i=!1,r)=>{c?g(e,c,i,r):(async()=>{let n=await f(t);c=n,g(e,n,i,r)})()},A=(e,t,i,r,l)=>{let s=i?"mweb":"web";(0,n.nP)(`${s}.${a}.social_tracking_pin_non_invite.attempt`);try{!i&&r&&h(e)?((0,n.nP)(`${s}.${a}.social_tracking_pin_non_invite.search_string_eligible`),b(e,t,i,l)):m(e.search)&&(0,n.nP)(`${s}.${a}.social_tracking_pin_non_invite.search_string_land`)}catch{(0,n.nP)(`${s}.${a}.social_tracking_pin_non_invite.caught_exception`)}}},489384:(e,t,i)=>{i.d(t,{Z:()=>u});var r=i(616550),n=i(575481),a=i(890360),l=i(174646),s=i(177270),o=i(180307),d=i(839284),c=i(992114);function u(){let{isBot:e,isSocialBot:t,referrerFromCookie:i,referrerFromHeader:u,countryFromHostName:_,countryFromIp:h,regionFromIp:p,isAuthenticated:m}=(0,l.B)(),f=(0,r.TH)(),P=(0,d.Z)(),g=new URLSearchParams(f.search),b=!e&&!!g.get("utm_pai"),A=g.get("utm_source"),I=!e&&!t&&(0,a.ey)(f),L=(0,o.Z)({countryFromHostName:_||"",countryFromIp:h||"",regionFromIp:p||"",isAuthenticated:m}),E=u||L&&i||"",C=P?E:(0,s.an)(E),y=!1,x=!e&&!t&&A&&["email",String(31)].includes(A),v=!e&&!t&&A&&["fb"].includes(A),w=!e&&!t&&!!(C&&(/facebook/.test(C)||/fb/.test(C))),S=!e&&!t&&!!(C&&(/twitter/.test(C)||/tw/.test(C)));I&&(0,c.nP)("unauth.entry_channel.invite_code",{sampleRate:1}),x&&(0,c.nP)("unauth.entry_channel.email_utm_source",{sampleRate:1}),v&&(0,c.nP)("unauth.entry_channel.social_media_utm_source_fb",{sampleRate:1}),w&&(0,c.nP)("unauth.entry_channel.social_media_referer_fb",{sampleRate:1}),S&&(0,c.nP)("unauth.entry_channel.social_media_referer_twitter",{sampleRate:1}),y=(0,s.Xn)(C);let T=!e&&y,O=!!g.get(n.J),k=!!g.get("twa_type")||C&&C.startsWith("android-app://com.pinterest.twa"),R=["utm_source","utm_medium","utm_campaign","utm_term","utm_content","utm_admin","utm_id","utm_mail","utm_swu"].some(e=>null!==g.get(e))||!!C||O||k;return{isPaid:b,isInvite:I,utmSource:A,referrer:C,isSocial:I,isDirect:!e&&!b&&!I&&!T&&!R,isSEO:T,isBrowserStorageAllowed:L}}},25402:(e,t,i)=>{i.d(t,{Z:()=>s});var r=i(667294),n=i(545007),a=i(741594),l=i(733668);function s(e){let{name:t,optionsKey:i}=e,s=t===a.fY,o=(0,l.bC)(),d=o?.get(t,i);if(d)throw d;let c=e=>e[t]?.[i],u=(0,n.v9)(({resources:e})=>c(e)?.nextBookmark),_=(0,n.v9)(({resources:e})=>c(e)?.data),h=(0,n.v9)(({resources:e})=>c(e)?.auxData),p=(0,n.v9)(({resources:e})=>c(e)?.error),m=(0,r.useRef)({auxData:void 0,data:void 0,error:void 0,isAtEnd:!1,nextBookmark:void 0});if(s)return m.current;let f={auxData:h,data:_,error:p,isAtEnd:u===a.qx,nextBookmark:u};return(f.auxData!==m.current.auxData||f.data!==m.current.data||f.error!==m.current.error||f.isAtEnd!==m.current.isAtEnd||f.nextBookmark!==m.current.nextBookmark)&&(m.current=f),m.current}},177270:(e,t,i)=>{i.d(t,{H5:()=>P,Xn:()=>m,Yf:()=>I,an:()=>f});var r=i(890360),n=i(50113),a=i(857147);let l="BING",s="GOOGLE",o="YAHOO",d="YANDEX",c="RAKUTEN",u="NAVER",_="AMP_CACHE",h="DUCKDUCKGO",p=[s,l,o,d,c,u,_,h];function m(e){return p.includes(function(e){let{hostname:t}=(0,a.Qc)(e,!0);if(t&&e){if(t.includes("google.")||e.includes("android-app://com.google.android.googlequicksearchbox"))return s;else if(t.includes("bing."))return l;else if(t.includes("yahoo."))return o;else if(t.includes("yandex."))return d;else if(t.includes("rakuten."))return c;else if(t.includes("naver."))return u;else if(t.includes("duckduckgo."))return h;else if(t.includes(".cdn.ampproject.org"))return _}return""}(e))}function f(e){return e||"undefined"!=typeof document&&document.referrer||""}let P=e=>{let t=new URL(e);return t.searchParams.set("nii","t"),t.href},g=e=>"/"!==e[e.length-1]?`${e}/`:e,b=e=>{let t=g(e),i=(0,r.ll)({pathname:t});if((0,r.L6)(i))return"PIN";if((0,r.am)(i))return"BOARD";if((0,n.Z)(i))return"PROFILE";if((0,r.bo)(i))return"TODAY";if((0,r.z_)(i))return"IDEA";else if((0,r.R$)(i))return"SHOPPING";return"UNKNOWN"},A=({selector:e,skipExternal:t})=>{let i=Array.from(document.querySelectorAll(e)),r={pin:[],board:[],user:[],today:[],idea:[],shopping:[]},n=new Set;return i.forEach(e=>{let i=e.getAttribute("href");if(!i||i.startsWith("#")||t&&i.startsWith("http")&&!i.includes(window.location.hostname))return;let a=g(i);if(n.has(a))return;n.add(a);let l=b(a);"PIN"===l?r.pin.push(a):"BOARD"===l?r.board.push(a):"PROFILE"===l?r.user.push(a):"TODAY"===l?r.today.push(a):"IDEA"===l?r.idea.push(a):"SHOPPING"===l&&r.shopping.push(a)}),r},I=({country:e,language:t,isBot:i,hostname:r,pathname:n})=>({domain:r,country:e,language:t,currentUrl:n,pageType:b(n),referrer:document.referrer,isBot:i,links:A({selector:"a[href]",skipExternal:!0})})},839284:(e,t,i)=>{i.d(t,{Z:()=>s});var r=i(667294);let n=()=>()=>{},a=()=>!1,l=()=>!0,s=()=>(0,r.useSyncExternalStore)(n,a,l)},562759:(e,t,i)=>{i.d(t,{r:()=>b,K:()=>g});var r=i(667294),n=i(218291),a=i(113474),l=i(882368),s=i(986298),o=i(805),d=i(477565);let c=e=>{let t={};for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&("object"!=typeof e[i]||null===e[i]||Array.isArray(e[i])?t[(0,d.Z)(i)]=e[i]:t[(0,d.Z)(i)]=c(e[i]));return t},u=(e,t)=>{let i=[];for(let r in e)r!==t&&i.push({id:r,...c(e[r])});let r=i.sort(({user:{businessName:e}},{user:{businessName:t}})=>e.localeCompare(t)),n=new Map;for(let e of r)n.set(e.id,e);return n},_={profiles:new Map,headerVisible:!1,orbacVisibility:!1,activeProfile:void 0,disableProfileChanger:!1},h=(e,t)=>{switch(t.type){case"LOAD_PROFILES":return{...e,profiles:t.payload};case"SET_ACTIVE_PROFILE":return{...e,activeProfile:t.payload};case"TOGGLE_HEADER_VISIBILITY":return{...e,headerVisible:t.payload};case"TOGGLE_ORBAC_VISIBILITY":return{...e,orbacVisibility:t.payload};case"TOGGLE_DISABLE_PROFILE_CHANGER":return{...e,disableProfileChanger:t.payload};default:return e}},p=({dispatch:e,isEnabled:t,state:i})=>{let{orbacVisibility:n,disableProfileChanger:a,headerVisible:l}=i,s=(0,r.useCallback)(i=>{t&&e({type:"SET_ACTIVE_PROFILE",payload:i})},[t,e]),o=(0,r.useCallback)(i=>{t&&e({type:"TOGGLE_ORBAC_VISIBILITY",payload:i??!n})},[t,e,n]);return{changeProfile:s,toggleORBACVisibility:o,toggleDisableProfileChanger:(0,r.useCallback)(i=>{t&&e({type:"TOGGLE_DISABLE_PROFILE_CHANGER",payload:i??!a})},[t,e,a]),toggleHeaderVisibility:(0,r.useCallback)(i=>{t&&e({type:"TOGGLE_HEADER_VISIBILITY",payload:i??!l})},[t,e,l])}},m=e=>{let[t,i]=(0,r.useReducer)(h,_),n=p({dispatch:i,isEnabled:e,state:t}),{activeProfile:a,orbacVisibility:l}=t;return(0,r.useEffect)(()=>{let e=(0,o.q)("orbacActiveProfile",!1);e&&i({type:"SET_ACTIVE_PROFILE",payload:e})},[]),(0,r.useEffect)(()=>{let e=(0,o.q)("orbacVisibilty",!1);e&&i({type:"TOGGLE_ORBAC_VISIBILITY",payload:e})},[]),(0,r.useEffect)(()=>{(0,o.N)("orbacVisibility",l)},[l]),(0,r.useEffect)(()=>{(0,o.N)("orbacActiveProfile",a)},[a]),{state:t,actions:n,receiveProfiles:(0,r.useCallback)((e,t)=>{i({type:"LOAD_PROFILES",payload:u(e,t)})},[i])}};var f=i(785893);let{Provider:P,useMaybeHook:g}=(0,n.Z)("RoleBasedAccessControlContext"),b=({children:e})=>{let t,i=(0,l.Z)(),n=!!(i.isAuth&&i.isPartner),{state:o,actions:d,receiveProfiles:c}=m(n),{activeProfile:u,headerVisible:_,profiles:h=[]}=o,p=h?Array.from(h.values()):[],g=(0,s.Z)(p),b=!!i.isAuth&&p.length>0&&g,A=i.isAuth?i.id:"",I=i.isAuth?i.username:"",{changeProfile:L,toggleORBACVisibility:E,toggleDisableProfileChanger:C,toggleHeaderVisibility:y}=d;(0,r.useEffect)(()=>{if(n){if("string"==typeof g){L(g);return}u||L(A)}},[g,A,n,L,u]),(0,r.useEffect)(()=>{n&&(b&&!_&&y(!0),!b&&_&&y(!1))},[y,b,n,_,h]);let{data:x}=(0,a.Z)(n?{name:"ApiResource",options:{url:"/vx/business_access/profiles/",disable_auth_failure_redirect:!0}}:null),v=x?.profiles;i&&i.isAuth&&o.activeProfile===i.id?t={id:i.id,permissions:["OWNER"],user:{username:I,businessName:i.fullName,imgUrl:i.imageSmallUrl}}:u&&o.profiles&&(t=o.profiles.get(u)),(0,r.useEffect)(()=>{v&&c(v,A)},[c,v,A]);let w=o.profiles?Array.from(o.profiles.values()):[];return(0,f.jsx)(P,{value:{profiles:w,headerVisible:o.headerVisible,activeProfile:t,changeProfile:L,toggleORBACVisibility:E,toggleDisableProfileChanger:C,toggleHeaderVisibility:y},children:e})}},827491:(e,t,i)=>{i.d(t,{Z:()=>l});var r=i(967312),n=i(562759),a=i(986298);let l=()=>{let{checkExperiment:e}=(0,r.F)(),t=(0,n.K)(),{activeProfile:i}=t||{},l=(0,a.Z)(t?.profiles||[]),{anyEnabled:s}=e("useorbacroutematcher_in_useorbacactingas");return s&&!l?Object.freeze({}):i&&(i.viewerMeetsMfaRequirement||(i.permissions||[]).includes("OWNER"))?i:Object.freeze({})}},986298:(e,t,i)=>{i.d(t,{Z:()=>s});var r=i(616550),n=i(890360),a=i(882368),l=i(903683);let s=e=>{let t=(0,r.TH)(),i=(0,a.Z)(),s=(0,l.S6)(),o=(0,r.$B)("/:username"),d=o?.params?.username,c=(0,r.$B)("/pin/:id"),u=!!c?.params?.id&&s(c.params.id)?.pinner?.id;if((0,n.ej)(t))return!1;if((0,n.RU)(t)||(0,n.mY)(t))return!0;let _=e.concat(i.isAuth?{user:{username:i.username},id:i.id}:{}).find(e=>{if(!e)return!1;let{user:t,id:i}=e;return(!!t&&"username"in t&&!!t.username&&!!d||!!u&&!!i)&&(t.username===d||u===i)});return!!_&&_.id}},488879:(e,t,i)=>{i.d(t,{D3:()=>u,DX:()=>d,Fk:()=>r,KY:()=>_,Ms:()=>n,N1:()=>h,_P:()=>o,gJ:()=>a,lJ:()=>s,nl:()=>l,q6:()=>c});let r=(e,t)=>{let i=e&&e.isAuth?e.fullName:"";return e&&t&&t.user&&t.user.businessName&&(i=t.user.businessName),i},n=(e,t)=>{let i=e&&e.isAuth?e.username:"";return e&&t&&t.user&&t.user.username&&(i=t.user.username),i},a=(e,t)=>{let i=e&&e.isAuth?e.imageMediumUrl:"";return e&&t&&t.user&&t.user.imgUrl&&(i=t.user.imgUrl),i},l=(e,t)=>!!(t&&t.user&&e&&e.isAuth&&t.id!==e.id?t.user.eligibleForStlTool:e&&e.isAuth&&e.eligibleForStlTool),s=(e,t)=>e&&e.isAuth&&t&&t.id&&t.id!==e.id?t.id:"",o=(e,t,i)=>i&&i.user&&t&&t.isAuth&&i.id!==t.id?i.user.merchantId:e.advertiser?.merchant_id,d=(e,t,i)=>i&&i.user&&e.isAuth&&i.id!==e.id?i.user.scheduledPinCount||0:e.isAuth&&t&&t.scheduled_pin_count||0,c=(e,t,i)=>!!(e&&e.isAuth&&i&&i.id&&i.id!==e.id&&i.id===t),u=(e,t,i)=>!!(c(e,t,i)||e&&e.isAuth&&t===e.id),_=(e,t,i)=>u(e,t&&t.owner&&t.owner.id||"",i);function h(e,t,i){return u(e,t?t.id:"",i)}},747607:(e,t,i)=>{i.d(t,{Z:()=>d});var r=i(667294),n=i(883119),a=i(643693),l=i(414478),s=i(785893);let o={boxShadow:"0px 8px 8px -8px rgba(0, 0, 0, 0.1)",transition:"box-shadow 300ms ease-in-out"};function d({children:e,forwardRef:t,overrideTop:i=0,position:d="static",shouldShowShadow:c=!1,top:u,style:_={}}){let{currentScrollPosition:h,isScrolled:p,setSubheaderShadow:m}=(0,a.W)();(0,r.useEffect)(()=>(c&&m("contentHeader"),()=>{c&&m(null)}),[c]);let f=!1;"pending"!==u&&(f=null!=u?h>=u:p);let P=(0,s.jsx)(n.xu,{ref:t,dangerouslySetInlineStyle:{__style:{position:d,..._,...f&&c&&{...o,zIndex:499}}},children:e});return"sticky"===d?(0,s.jsx)(n.Le,{top:i,zIndex:new n.H3([l.Zu]),children:P}):P}},381366:(e,t,i)=>{i.d(t,{Z:()=>a,k:()=>r});let{Provider:r,useHook:n}=(0,i(218291).Z)("Conversations"),a=n},5096:(e,t,i)=>{i.d(t,{Z:()=>v});var r=i(667294),n=i(545007),a=i(616550),l=i(883119),s=i(219308),o=i(909512),d=i(852015),c=i(233846),u=i(967312),_=i(538645),h=i(331935),p=i(724027),m=i(785893);function f({isOpen:e,onDismiss:t}){let i=(0,c.ZP)();return(0,m.jsx)(d.ZP,{accessibilityModalLabel:i._('Disabled Pin Publishing Error Message Modal', 'disabledPinCreationModal.modal.accessibilityLabel', 'Label for disabled pin creation modal'),isOpen:e,mobileAccessibilityCloseIconLabel:i._('Close disabled publishing message modal', 'disabledPinCreationModal.modal.closeIconLabel', 'Label for the close button on the disabled publishing modal'),onDismiss:t,type:"DisabledPublishingModal",children:(0,m.jsxs)(l.xu,{alignItems:"center",direction:"column",display:"flex",paddingX:6,paddingY:4,children:[(0,m.jsx)(l.X6,{children:i._('Oops...', 'disabledPinCreationModal.modal.heading', 'Exclamation used to show recognition of a mistake.')}),(0,m.jsx)(l.xu,{paddingY:3,children:(0,m.jsx)(l.xv,{children:i._('Our server is experiencing a mild case of the hiccups at the moment. Please try refreshing and publishing again later.', 'disabledPinCreationModal.modal.text', 'Message to let users know there is an error.')})}),(0,m.jsx)(l.xu,{paddingY:3,children:(0,m.jsx)(l.zx,{color:"red",onClick:()=>t(),size:"lg",text:i._('Dismiss', 'disabledPinCreationModal.button.dismiss', 'Button text for closing the disabled pin creation modal')})})]})})}function P(e){let t=(0,c.ZP)(),{viewType:i,boardId:r,handleTouch:n}=e,a=t._('Board', 'createMenuLinkButton.Create.Board.Label', 'label for creating a new board option'),s=t._('Section', 'createMenuLinkButton.Create.Section.Label', 'label for creating a new section option');return 5===i&&r?(0,m.jsx)(l.Tg,{href:`/board/${r}/create_section/`,onTap:n,rounding:2,children:(0,m.jsx)(l.xu,{"data-test-id":"addSectionButton",paddingY:2,children:(0,m.jsx)(l.X6,{size:"400",children:s})})}):(0,m.jsx)(l.Tg,{href:"/board/create/",onTap:n,children:(0,m.jsx)(l.xu,{"data-test-id":"createMenuCreateBoardButton",paddingY:2,children:(0,m.jsx)(l.X6,{size:"400",children:a})})})}var g=i(108602);function b({disabledPinCreation:e,handleDisablePublish:t,handleTouch:i}){let r=(0,c.ZP)(),n=(0,a.k6)(),s=e=>({imageBase64:e,description:"",imageUrl:"",method:g.Iv}),o=r._('Photo', 'createPinButton.Photo.Upload.Label', 'label to upload pin from camera roll photos');return(0,m.jsx)(l.iP,{onTap:()=>{if(e){t();return}i()},tapStyle:"none",children:(0,m.jsxs)(l.xu,{paddingY:2,position:"relative",children:[(0,m.jsx)(l.X6,{size:"400",children:o}),e?null:(0,m.jsx)("input",{accept:"image/*",id:"upload-pin",onChange:e=>{let t=new FileReader;t.readAsDataURL(e.target.files[0]),t.onload=()=>{let e=t.result;n.push({pathname:`/pin/create/${g.Iv}/`,state:s(String(e))})}},style:{opacity:0,position:"absolute",top:"0px",height:"100%",width:"100%"},type:"file"})]})})}var A=i(17409),I=i(683829),L=i(968386);function E(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let C=new l.Ry(1),y=e=>{let t=window&&window.innerWidth||0,i=e._('Enter a link to create a Pin, https://...', 'placeholder in text field where a user inputs a URL to create a Pin', 'placeholder in text field where a user inputs a URL to create a Pin'),r=e._('Enter a link, https://...', 'placeholder in text field where a user inputs a URL to create a Pin - short version, 30 char limit', 'placeholder in text field where a user inputs a URL to create a Pin - short version, 30 char limit');return t<380?r:i};class x extends r.PureComponent{constructor(...e){super(...e),E(this,"state",{createPinFromLinkUrl:"",showCreateModal:!1,showInlineTextEditCreatePin:!1,showPublishingDisabledError:!1,urlValidationError:null}),E(this,"createPinFromLinkInput",(0,r.createRef)()),E(this,"createMenuPlusIconButtonRef",(0,r.createRef)()),E(this,"closeCreateModal",()=>{this.setState({showCreateModal:!1,showInlineTextEditCreatePin:!1}),this.props.updatePinBuilderInput({isInputOpen:!1,submittedLink:""})}),E(this,"clearValidationError",()=>{this.setState({urlValidationError:null})}),E(this,"openCreateModal",()=>{this.handleTouch(),this.props.requireAuthForLimitedLogin({fn:()=>this.setState({showCreateModal:!0}),modalHeader:(0,A.is)(this.props.i18n)})()}),E(this,"handleCreatePinFromLinkTouch",()=>{this.setState({showInlineTextEditCreatePin:!0}),this.props.updatePinBuilderInput({isInputOpen:!0})}),E(this,"handleDisablePublish",()=>{this.setState({showCreateModal:!1,showPublishingDisabledError:!0})}),E(this,"handleLinkFieldChange",({value:e})=>{this.setState({createPinFromLinkUrl:e})}),E(this,"handlePinFromLinkFormSubmit",(e,t)=>{let{createPinFromLinkUrl:i}=this.state;e.preventDefault();let{errors:r}=(0,h.Jx)({message:this.props.i18n._('Oops! Please enter a valid URL.', 'URL validation error message on Pin builder form', 'URL validation error message on Pin builder form')})(i),[n]=r;n?this.setState({urlValidationError:n}):this.handleUrlValidationSuccess(t)}),E(this,"handleTouch",()=>{let{logContextEvent:e,viewType:t,elementType:i}=this.props;e({view_type:t,view_parameter:3106,element:i,event_type:102,aux_data:{source:p.Z.PROFILE}})}),E(this,"handleUrlValidationSuccess",e=>{this.setState({showInlineTextEditCreatePin:!1});let{createPinFromLinkUrl:t}=this.state;this.props.updatePinBuilderInput({submittedLink:t}),e.push({pathname:"/pin-builder/",state:{createPinFromLinkUrl:t}}),this.closeCreateModal()}),E(this,"renderCreatePinFromLinkOption",()=>{let{disabledPinCreation:e,history:t}=this.props,{createPinFromLinkUrl:i,showInlineTextEditCreatePin:r}=this.state,n=this.props.i18n._('Website', 'editPin.CreatePinFromUrl.Label', 'label for option to create a pin from a url');return(0,m.jsx)(l.kC,{alignItems:"center",height:46,justifyContent:"start",children:r?(0,m.jsx)("form",{onSubmit:e=>this.handlePinFromLinkFormSubmit(e,t),style:{width:"100%"},children:(0,m.jsxs)(l.xu,{display:"flex",justifyContent:"between",position:"relative",zIndex:C,children:[(0,m.jsxs)(l.xu,{ref:this.createPinFromLinkInput,width:"100%",children:[this.renderErrorFlyout(),(0,m.jsx)(l.nv,{id:"create-pin-from-link",onChange:this.handleLinkFieldChange,onFocus:()=>this.setState({urlValidationError:null}),placeholder:y(this.props.i18n),size:"lg",value:i})]}),(0,m.jsx)(l.hU,{accessibilityLabel:this.props.i18n._('Create Pin from entered link', 'navigation button to confirm user will create a Pin from a link they entered', 'navigation button to confirm user will create a Pin from a link they entered'),icon:"arrow-forward",iconColor:"darkGray",onClick:({event:e})=>this.handlePinFromLinkFormSubmit(e,t),size:"lg"})]})}):(0,m.jsx)(l.iP,{onTap:()=>{if(e){this.handleDisablePublish();return}this.handleCreatePinFromLinkTouch()},tapStyle:"none",children:(0,m.jsx)(l.xu,{"data-test-id":"websiteButton",position:"relative",children:(0,m.jsx)(l.X6,{size:"400",children:n})})})})}),E(this,"renderErrorFlyout",()=>{let{urlValidationError:e}=this.state;return e&&(0,m.jsx)(l.J2,{anchor:this.createPinFromLinkInput.current,idealDirection:"up",onDismiss:this.clearValidationError,size:"sm",children:(0,m.jsx)(l.xu,{padding:3,width:"100%",children:(0,m.jsxs)(l.kC,{gap:2,children:[(0,m.jsx)(l.qb,{type:"problem"}),(0,m.jsx)(l.xv,{align:"center",weight:"bold",children:e})]})})})})}componentDidMount(){let{isInputOpen:e,submittedLink:t}=this.props;(e||t)&&this.setState({showCreateModal:!!e,showInlineTextEditCreatePin:!!e,createPinFromLinkUrl:t||""})}render(){let{bgColor:e,boardId:t,buttonPadding:i,disabledPinCreation:n,i18n:a,isDesktop:s,iconButtonColor:c="gray",iconButtonSize:u="xl",viewType:_}=this.props,{showCreateModal:h,showPublishingDisabledError:p}=this.state,g=this.props.i18n._('Add a Pin or board', 'heading in profile create modal', 'heading in profile create modal');164===_?g=this.props.i18n._('Add to section', 'heading in section create modal', 'heading in section create modal'):5===_&&(g=this.props.i18n._('Add a Pin or section', 'heading in profile create modal', 'heading in profile create modal')||a._('Add to board', 'heading in board create modal', 'heading in board create modal'));let A=4===_?this.props.i18n._('Add to profile', 'editPin.AddToProfile.Modal.Header', 'heading in profile create modal'):g,I=(5===_||164===_)&&this.createMenuPlusIconButtonRef.current;return(0,m.jsxs)(r.Fragment,{children:[(0,m.jsx)(l.kC,{alignItems:"center",justifyContent:"start",children:(0,m.jsx)(l.xu,{"data-test-id":"createMenuCreateButton",children:(0,m.jsx)(l.hU,{ref:this.createMenuPlusIconButtonRef,accessibilityLabel:this.props.i18n._('Create a Pin or board', 'icon that opens model prompting user to create a new pin or board', 'icon that opens model prompting user to create a new pin or board'),bgColor:e,icon:"add",iconColor:c,onClick:this.openCreateModal,padding:"auto"!==i?i:1,size:u})})}),h&&(0,m.jsx)(d.ZP,{accessibilityModalLabel:"",heading:A,isOpen:this.state.showCreateModal,mobileAccessibilityCloseIconLabel:this.props.i18n._('close board and pin create modal', 'close modal that prompts user to create a new pin or board', 'close modal that prompts user to create a new pin or board'),onDismiss:this.closeCreateModal,type:"create_menu",children:(0,m.jsx)(l.xu,{padding:3,children:(0,m.jsxs)(l.kC,{alignItems:"stretch",direction:"column",justifyContent:"start",children:[(0,m.jsxs)(r.Fragment,{children:[(0,m.jsxs)(l.xu,{paddingX:2,children:[(0,m.jsx)(l.xv,{children:this.props.i18n._('Create', 'editPin.Create.Section.Text', 'Section title to Create new things on Edit Pin add modal')}),(0,m.jsx)(r.Fragment,{children:this.renderCreatePinFromLinkOption()}),(0,m.jsx)(b,{disabledPinCreation:n,handleDisablePublish:this.handleDisablePublish,handleTouch:this.handleTouch})]}),164!==_&&(0,m.jsxs)(l.xu,{marginTop:6,paddingX:2,children:[(0,m.jsx)(l.xv,{children:this.props.i18n._('Add', 'editPin.Section.Add.Text', 'Section Add title on Edit Pin add modal')}),(0,m.jsx)(P,{boardId:t,handleTouch:()=>{this.handleTouch(),this.closeCreateModal()},viewType:_})]})]}),(0,m.jsx)(l.xu,{display:"flex",justifyContent:"center",marginBottom:2,marginTop:7,children:(0,m.jsx)(l.zx,{onClick:()=>this.closeCreateModal(),size:"lg",text:this.props.i18n._('Close', 'editPin.Modal.Close.Button', 'Button text to close modal on EditPin')})})]})})}),p&&(0,m.jsx)(f,{isOpen:!0,onDismiss:()=>{this.setState({showPublishingDisabledError:!1})}}),I&&(0,m.jsx)(o.N,{anchors:{[s?3006:4006]:this.createMenuPlusIconButtonRef.current},idealDirection:"up",onAnchorTouch:"complete",placementId:s?18:1000251,scrollToDismiss:!0})]})}}function v(e){let t=(0,c.ZP)(),i=(0,_.HG)(),{checkExperiment:r}=(0,u.F)(),l=["disable_all","disable_web_pins"].includes(r("disable_pin_creation").group),o=(0,n.I0)(),d=(0,a.k6)(),{pinBuilder:h}=(0,n.v9)(e=>e.session),p=(0,s.Z)(),f=h&&h.isInputOpen,P=h&&h.submittedLink,g=(0,I.Z)();return(0,m.jsx)(x,{...e,disabledPinCreation:l,history:d,i18n:t,isDesktop:i,isInputOpen:f,logContextEvent:p,requireAuthForLimitedLogin:g,submittedLink:P,updatePinBuilderInput:e=>o((0,L.p)(e))})}},352437:(e,t,i)=>{i.d(t,{Z:()=>l});var r=i(883119),n=i(233846),a=i(785893);let l=({isInModal:e})=>{let t=(0,n.ZP)();return(0,a.jsx)(r.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(255, 255, 255, .5)"}},display:"flex",height:"100%",justifyContent:"center",left:!0,position:e?"absolute":"fixed",top:!0,width:"100%",zIndex:new r.Ry(1),children:(0,a.jsx)(r.xH,{accessibilityLabel:t._('Loading', 'Full page loading state', 'Full page loading state'),show:!0})})}},643693:(e,t,i)=>{i.d(t,{H:()=>d,W:()=>o});var r=i(667294),n=i(218291),a=i(169650),l=i(785893);let{Provider:s,useHook:o}=(0,n.Z)("HeaderShadow");function d({children:e}){let[t,i]=(0,r.useState)(!1),[n,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)(0),[u,_]=(0,r.useState)(null),h=(0,a.Z)(()=>{t&&(o(window.scrollY>0),c(window.scrollY))},50);return(0,r.useEffect)(()=>(i(!0),()=>{i(!1)}),[]),(0,r.useEffect)(()=>(window.addEventListener("scroll",h),()=>{window.removeEventListener("scroll",h)}),[t]),(0,l.jsx)(s,{value:{currentScrollPosition:d,isScrolled:n,setSubheaderShadow:_,subheaderShadow:u},children:e})}},196965:(e,t,i)=>{i.d(t,{Z:()=>o});var r=i(667294),n=i(219308),a=i(112800);let l=e=>Object.keys(e).reduce((t,i)=>(void 0===e[i]&&delete t[i],t),{...e}),s=({viewType:e,viewParameter:t,viewData:i,auxData:r,objectIdStr:n,component:s,clientTrackingParams:o,element:d},c)=>{let u=l({event_type:13,view_type:e,view_parameter:t,view_data:i,aux_data:r,object_id_str:n,component:s,clientTrackingParams:o,element:d});-1===Object.keys(u).indexOf("view_type")&&(0,a.My)("mweb.logging.null_view_type"),c(u)};function o(e){let{auxData:t,clientTrackingParams:i,children:a,component:l,element:o,objectIdStr:d,viewData:c,viewParameter:u,viewType:_}=e,h=(0,n.Z)(),p=JSON.stringify(t),m=JSON.stringify(c);return(0,r.useEffect)(()=>{s(e,h)},[h,p,i,l,o,d,m,u,_]),r.Children.only(a)}},108602:(e,t,i)=>{i.d(t,{Iv:()=>r,dU:()=>_,it:()=>l,jI:()=>u,n0:()=>o,nY:()=>a,sW:()=>c,up:()=>n});let r="uploaded",n="pinbuilder",a="scraped",l="button";function s(e){return!!e&&"object"==typeof e&&"method"in e}function o(e){return s(e)&&e.method===a}function d(e){return s(e)&&e.method===r}function c(e){return s(e)&&e.method===l}function u(e){return o(e)||d(e)||c(e)}function _({boardId:e,checkExperiment:t,createPin:i,sectionId:r,state:n}){let a=[];if(o(n)){let{imgData:l}=n;l.forEach(l=>{a.push(i(function({boardId:e,checkExperiment:t,image:i,sectionId:r,state:n}){let{description:a,link:l,method:s}=n;return{boardId:e,checkExperiment:t,description:a,guid:"",imageBase64:"",imageUrl:i,link:l,method:s,sectionId:r}}({boardId:e,checkExperiment:t,image:l,sectionId:r,state:n})))})}else a.push(i(function({boardId:e,checkExperiment:t,sectionId:i,state:r}){if(d(r)){let{description:n,imageBase64:a,imageUrl:l,method:s}=r;return{boardId:e,checkExperiment:t,description:n,guid:"",imageBase64:a,imageUrl:l,link:"",method:s,sectionId:i}}{let{description:n,guid:a,imageUrl:l,link:s,method:o}=r;return{boardId:e,checkExperiment:t,description:n,guid:a,imageUrl:l,link:s,method:o,sectionId:i}}}({boardId:e,checkExperiment:t,sectionId:r,state:n})));return a}},41771:(e,t,i)=>{i.d(t,{CC:()=>c,H$:()=>_,Mt:()=>o,dp:()=>u,p9:()=>h});var r=i(547504),n=i(838380),a=i(69401),l=i(943369),s=i(756493);let o=({key:e,lastVisitedPage:t,imageSignature:i,pinId:r,imageInfo:n,pinDescription:s,pinInviteCode:o})=>{let d=(0,l.M0)().getItem(e)??[];if(!d[0]||d[0].path!==t){let d=[{path:t,ts:Date.now(),pin_id:r||0,first_pin_image_signature:i||"",first_pin_id:r||"",image_info:n||"",pin_description:s||"",is_shared:!!o,pin_invite_code:o}];(0,l.M0)().prependItem(e,d,a.LG)}},d=()=>{let e,t=(0,s.Nl)().getItem(n.N_);if(!t)return[];try{e=JSON.parse(t)}catch(t){e=[]}return e},c=({path:e,image:t,dominant_color:i,pin_description:r,pin_id:a})=>{let l=d();l[0]&&l[0].path===e||(0,s.Nl)().setItem(n.N_,[{path:e,image:t,pin_description:r??"",dominant_color:i||"",pin_id:a||""}].concat(l))};function u(e,t,i,n,a,l){o({key:r.uc,lastVisitedPage:e,imageSignature:t,pinId:i,imageInfo:n,pinDescription:a,pinInviteCode:l})}let _=(e,t,i,n,a)=>{o({key:r.hI,lastVisitedPage:e,imageSignature:t,pinId:i,imageInfo:n,pinDescription:a??""})};function h(e,t,i,n,a){o({key:r.tH,lastVisitedPage:e,imageSignature:t,pinId:i,imageInfo:n,pinDescription:a??""})}},17409:(e,t,i)=>{i.d(t,{Bb:()=>m,Bx:()=>s,F4:()=>l,Qj:()=>o,_6:()=>p,gv:()=>a,hg:()=>d,is:()=>_,jP:()=>h,lt:()=>n,oM:()=>c,wI:()=>u});var r=i(857147);let n=e=>e._('Log in to continue', 'limitedLogin.modalHeader.default', 'Default title on mobile web limited login modal'),a=({firstName:e,i18n:t})=>e?(t._('{{ name }} invited you to join their board', 'limitedLogin.modalHeader.groupBoardCollab', 'Mobile Modal prompting users to join a friends({{ name }}) board')).replace("{{ name }}",e):t._('Your friends invited you to join their board', 'limitedLogin.modalHeader.groupBoardCollab', 'Mobile Modal prompting users to join a friends board'),l=e=>{let t=(0,r.mB)(e.search).board_url;if(t){let e=(0,r.Jx)(t),i=(0,r.XP)({accept_invite:!0,seamless:!0});return e.includes("?")?`${e}&${i}`:`${e}?${i}`}return e.pathname},s=e=>e._('Log in to save this Pin', 'limitedLogin.modalHeader.repin', 'Title on mobile web limited login modal to prompt users to login after they clicked save button.'),o=e=>{let t=e.pathname;if(t.startsWith("/pin/")){let e=t.split("/");if(e.length>2)return`/${e[1]}/${e[2]}/repin/`}return t},d=e=>e._('Log in to send this Pin', 'limitedLogin.modalHeader.send', 'Title on mobile web limited login modal to prompt users to login after they clicked send button.'),c=e=>e._('Log in to edit this Pin', 'limitedLogin.modalHeader.editPin', 'Title on mobile web limited login modal to prompt users to login after they clicked edit button.'),u=e=>{let t=e.pathname;if(t.startsWith("/pin/")){let e=t.split("/");if(e.length>2)return`/${e[1]}/${e[2]}/edit/`}return t},_=e=>e._('Log in to create a Pin or board', 'limitedLogin.modalHeader.create', 'Title on mobile web limited login modal to prompt users to login to create a Pin or board.'),h=e=>e._('Log in to hide this Pin', 'limitedLogin.modalHeader.hidePin', 'Title on mobile web limited login modal to prompt users to login after they clicked hide Pin button.'),p=e=>e._('Log in to share the profile', 'limitedLogin.modalHeader.shareProfile', 'Title on mobile web limited login modal to prompt users to login after they clicked share button on profile page.'),m=e=>e._('Log in to create a board', 'limitedLogin.modalHeader.createBoard', 'Title on mobile web limited login modal to prompt users to login to create a board.')},640641:(e,t,i)=>{i.d(t,{C0:()=>r,Gj:()=>n,ZU:()=>l,a0:()=>o,vW:()=>s,y4:()=>a});let r=["DMCA","Trademark","GDPR"],n=["dsa","uk","india"],a=["dsa","uk"],l=new Date(2024,0,1),s="GB",o={test:{LAW:"test",DECIDER_KEY:"legal_webapp_takedown_form_test",COUNTRY_CODES:["US"],API:"/v3/legal/takedowns/test/",COMPLAINTS_OFFICE:!0,TRUSTED_FLAGGER:!1,RESTRICT_MULTIPLE_LAWS:!1,ALLOW_ANON_SUBMISSION:!1},turkey:{LAW:"turkey",DECIDER_KEY:"legal_webapp_takedown_form_turkey",COUNTRY_CODES:["TR"],API:"/v3/legal/takedowns/turkey/",COMPLAINTS_OFFICE:!1,RESTRICT_MULTIPLE_LAWS:!0,ALLOW_ANON_SUBMISSION:!1,TRUSTED_FLAGGER:!1},dsa:{LAW:"dsa",DECIDER_KEY:"legal_webapp_takedown_form_dsa",COUNTRY_CODES:["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","EU"],API:"/v3/legal/takedowns/dsa/",COMPLAINTS_OFFICE:!1,RESTRICT_MULTIPLE_LAWS:!0,ALLOW_ANON_SUBMISSION:!0,TRUSTED_FLAGGER:!0,ALLOW_MULTIPLE_COMPLAINTS:!0,SHOW_VIOLATING_COUNTRY_OPTION:!0},uk:{LAW:"uk",DECIDER_KEY:"legal_webapp_takedown_form_uk",COUNTRY_CODES:[s],API:"/v3/legal/takedowns/dsa/",COMPLAINTS_OFFICE:!1,RESTRICT_MULTIPLE_LAWS:!0,ALLOW_ANON_SUBMISSION:!1,TRUSTED_FLAGGER:!1,ALLOW_MULTIPLE_COMPLAINTS:!0,SHOW_VIOLATING_COUNTRY_OPTION:!1},india:{LAW:"india",DECIDER_KEY:"legal_webapp_takedown_form_india",COUNTRY_CODES:["IN"],API:"/v3/legal/takedowns/india/",COMPLAINTS_OFFICE:!1,RESTRICT_MULTIPLE_LAWS:!0,ALLOW_ANON_SUBMISSION:!0,TRUSTED_FLAGGER:!1}}},68366:(e,t,i)=>{i.d(t,{Z:()=>a});var r=i(174646),n=i(640641);function a(){let{countryFromIp:e}=(0,r.B)();return{isEUBasedIp:!!e&&!!n.a0?.dsa?.COUNTRY_CODES?.includes(e),isIndiaIp:!!e&&!!n.a0?.india?.COUNTRY_CODES?.includes(e)}}},414478:(e,t,i)=>{i.d(t,{JR:()=>o,PJ:()=>s,Zu:()=>l,c6:()=>a,mM:()=>n});var r=i(883119);let n=new r.Ry(1),a=new r.H3([n]),l=new r.H3([a]),s=new r.H3([l]),o=new r.H3([l])},968386:(e,t,i)=>{i.d(t,{F:()=>r,p:()=>n});let r=e=>({type:"PIN_BUILDER_LOADED_IMAGES",payload:e}),n=e=>({type:"UPDATE_PIN_BUILDER_INPUT",payload:e})},969827:(e,t,i)=>{i.d(t,{Z:()=>r});function r(e){let{users:t}=e;if(!t)return;let i=Object.keys(t).find(e=>void 0!==t[e].login_state);return i?t[i]:void 0}},253695:(e,t,i)=>{i.d(t,{Z:()=>a});var r=i(442279),n=i(969827);let a=(0,r.P1)(n.Z,e=>e.invites,(e,t)=>Object.keys(t).reduce((i,r)=>{let n=r.split(":"),a=n[0],l=n[1],s=e.id===l,o=t[r]&&["new","contact_request_not_approved"].includes(t[r].status);return s&&o&&(i[a]=r),i},{}))}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/77058-d0a6ef8742fe2263.mjs.map